<div class="main__file">
  <ul class="nav nav-tabs main__file__tabs" role="tablist">
    <li ui-sref-active-eq="active">
      <a ui-sref="main.file({id: file._id })">
        View
      </a>
    </li>
    <li ui-sref-active="active">
      <a ui-sref="main.file.use({id: file._id })">
        Use
      </a>
    </li>
  </ul>
  <div class="main__file__heading">
    <form name="nameForm" ng-submit="saveFile()">
      <div class="row">      
        <div class="col-xs-12" ng-show="secret">
          <div class="input-group">
            <input type="text" placeholder="You can optinaly choose a name for this file" class="form-control" ng-model="file.name" />                
            <span class="input-group-btn">
              <button type="submit" ng-disabled="!fileChanged()" class="btn btn-primary">
                Save
              </button>
            </span>
          </div>
        </div>
        <div class="col-xs-12" ng-hide="secret">
          <input type="text" class="form-control" ng-value="file.name || 'Untitled file'" readonly />                
        </div>
      </div>
    </form>    
  </div>
  <div class="main__file__content" ui-view>
    <div class="main__file__content__alerts">
      <div class="alert alert-info text-center main__file__content__alerts__item" ng-show="mustRefreshFile()">
        This file has been updated. <strong><a ng-click="refreshFile()">Refresh</a></strong> or <a ng-click="$parent.updatedFile = null">ignore changes.</a>
      </div>
    </div>
    <form name="editorForm">
      <div class="main__file__content__pre"
           ng-class="{ 'main__file__content__pre--readonly': !secret }"
           ui-ace="{mode: 'json', theme: 'clouds', onLoad: saveEditor}"
           ui-validate="'noParseError($value)'"
           readonly="{{!secret}}"
           required
           ng-model="$parent.content">
      </div>
    </form>
  </div>
</div>
